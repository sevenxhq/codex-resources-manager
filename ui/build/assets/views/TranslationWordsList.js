import{j as e,r,v as l,M as d,a as u,V as c}from"../index.js";import{m as h}from"../markdownToHTML.js";import"../marked.esm.js";const x=({translationWord:a})=>{const{content:s,loading:n}=f(a);return s===null&&!n?null:n?e.jsx("div",{children:"Loading..."}):e.jsx("div",{dangerouslySetInnerHTML:{__html:s??""},className:"prose-lg"})},f=a=>{const[s,n]=r.useState(null),[o,i]=r.useState(!1);return r.useEffect(()=>{l.setMessageListeners(t=>{switch(t.data.type){case"update-tw-content":n(t.data.payload.content!==null?h(t.data.payload.content):null),i(!1);break}})},[]),r.useEffect(()=>{l.postMessage({type:d.GET_TW_CONTENT,payload:{translationWord:a}}),i(!0)},[a]),{content:s,loading:o}},p=()=>{const{translationWordsList:a,diskTwl:s}=g(),[n,o]=r.useState(0);r.useEffect(()=>{s.length>0&&o(0)},[s,s.length]);const i=r.useMemo(()=>{var t;return s!=null&&s[n]?{path:((t=s==null?void 0:s[n])==null?void 0:t.twUriPath)??null}:null},[n,s]);return a.length===0?e.jsx("div",{className:"prose-base",children:e.jsx("h1",{children:e.jsx("i",{children:"No Translation Words Found"})})}):s.length===0?e.jsx("div",{className:"prose-base",children:e.jsx("h3",{children:"Found translation Words but they do not have corresponding descriptions on disk."})}):e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(c,{onClick:()=>o(t=>t===0?t:t-1),appearance:"secondary","aria-label":"left",className:"",disabled:n===0,children:e.jsx("i",{className:"codicon codicon-chevron-left"})}),e.jsxs("span",{className:"w-fit",children:[n+1," / ",s.length]}),e.jsx(c,{onClick:()=>o(t=>t===s.length-1?t:t+1),appearance:"secondary","aria-label":"right",className:"",disabled:n===s.length-1,children:e.jsx("i",{className:"codicon codicon-chevron-right"})})]}),e.jsx("div",{id:"note-container",className:"col-span-6",children:e.jsx(x,{translationWord:i})})]})},g=()=>{const[a,s]=r.useState([]);return r.useEffect(()=>{l.setMessageListeners(o=>{switch(o.data.type){case"update-twl":s(o.data.payload.wordsList??[]);break}})},[]),{diskTwl:r.useMemo(()=>a.filter(o=>o.existsOnDisk),[a]),translationWordsList:a}};u(e.jsx(p,{}));
