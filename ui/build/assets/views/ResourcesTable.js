import{a as y,j as e,r as o,v as d,M as r,e as x,f as j,V as p}from"../index.js";const E=()=>{const{resourcesTypes:l}=w(),[t,a]=o.useState(""),{resourceTableData:n}=h(),{downloadedResources:i}=f();o.useEffect(()=>{d.postMessage({type:r.SET_CURRENT_RESOURCE_TYPE,payload:{resourceType:t}})},[t]);const u=(s,c)=>{d.postMessage({type:r.DOWNLOAD_RESOURCE,payload:{fullResource:s.fullResource,resourceType:c}})},R=s=>{s&&d.postMessage({type:r.OPEN_RESOURCE,payload:{resource:s}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between w-full",children:["Filter Resources",e.jsx(x,{className:"w-1/2",onInput:s=>{a(s.target.value)},children:l.map(s=>e.jsx(j,{onClick:()=>a(s.value),children:s.label}))})]}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"font-semibold",children:e.jsxs("tr",{children:[e.jsx("td",{children:"Resource"}),e.jsx("td",{children:"Owner"}),e.jsx("td",{children:"Version"}),e.jsx("td",{})]})}),e.jsx("tbody",{className:"gap-3",children:n==null?void 0:n.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:s.owner.avatarUrl?e.jsx("img",{src:s.owner.avatarUrl,alt:s.owner.name,className:"w-8 h-8 rounded-lg object-contain"}):s.owner.name}),e.jsx("td",{title:`Released on : ${new Date(s.version.releaseDate).toLocaleDateString()}`,children:s.version.tag}),e.jsx("td",{className:"flex items-center justify-center px-2",children:i.find(c=>c.id===s.id)?e.jsxs(p,{title:"Open Resource",appearance:"primary",className:"w-full",onClick:()=>R(i.find(c=>c.id===s.id)),children:[e.jsx("i",{className:"codicon codicon-eye"})," Open"]}):e.jsxs(p,{title:"Download Resource",appearance:"secondary",className:"w-full",onClick:()=>u(s,s.resourceType),children:[e.jsx("i",{className:"codicon codicon-cloud-download"})," Download"]})})]}))})]})]})};y(e.jsx(E,{}));const w=()=>{const[l,t]=o.useState([]);return o.useEffect(()=>{d.setMessageListeners(a=>{switch(a.data.type){case"SET_RESOURCES_TYPES":console.log("event.data.payload.resourcesTypes",a.data.payload),t(a.data.payload.resourcesTypes??[]);break}})},[]),{resourcesTypes:l,setResourcesTypes:t}},h=()=>{const[l,t]=o.useState([]);return o.useEffect(()=>{d.setMessageListeners(a=>{switch(a.data.type){case"SET_RESOURCE_TABLE_DATA":console.log("event.data.payload.tableData",a.data.payload),t(a.data.payload.tableData??[]);break}})},[]),{resourceTableData:l}},f=()=>{const[l,t]=o.useState([]);return o.useEffect(()=>{d.setMessageListeners(a=>{switch(a.data.type){case"SET_DOWNLOADED_RESOURCES":console.log("event.data.payload.downloadedResources",a.data.payload),t(a.data.payload.downloadedResources??[]);break}})},[]),{downloadedResources:l}};
